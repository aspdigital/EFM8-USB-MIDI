C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       04/24/2019 21:28:08 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE DESCRIPTORS
OBJECT MODULE PLACED IN .\src/descriptors.OBJ
COMPILER INVOKED BY: Z:\Applications\Simplicity Studio.app\Contents\Eclipse\developer\toolchains\keil_8051\9.53\BIN\C51.
                    -exe /Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/src/descriptors.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE)
                    - WARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(8,SPEED) DEFINE(DEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(/Users/andy/Project
                    -s/Workspaces/SiLabs_8051/EFM8-USB-MIDI/inc/config;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/inc;/Users/a
                    -ndy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/midi;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/efm
                    -8ub2/peripheralDrivers/inc;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/efm8ub2_slstk2001a/bsp;/Users/a
                    -ndy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/bsp;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/usb_
                    -audio/inc;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/efm8_usb/inc;/Users/andy/Projects/Workspaces/SiL
                    -abs_8051/EFM8-USB-MIDI/lib/efm8_assert;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/bsp/efm8_memory_lcd
                    -/inc;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/bsp/efm8_memory_lcd/inc/config;/Users/andy/Projects/W
                    -orkspaces/SiLabs_8051/EFM8-USB-MIDI/lib/bsp/efm8_memory_lcd/inc/graphics;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM
                    -8-USB-MIDI/lib/bsp/efm8_joystick;/Users/andy/Projects/Workspaces/SiLabs_8051/EFM8-USB-MIDI/lib/bsp/efm8_rgb_led;/Applica
                    -tions/Simplicity Studio.app/Contents/Eclipse/developer/sdks/8051/v4.1.6//Device/shared/si8051Base;/Applications/Simplici
                    -ty Studio.app/Contents/Eclipse/developer/sdks/8051/v4.1.6//Device/EFM8UB2/inc) PRINT(.\src/descriptors.lst) COND PAGEWID
                    -TH(120) PAGELENGTH(65) OA OBJECT(.\src/descriptors.OBJ)

line level    source

   1          /*******************************************************************************
   2           * @file descriptors.c
   3           * @brief USB descriptors.
   4           *******************************************************************************/
   5          
   6          //=============================================================================
   7          // src/descriptors.c: generated by Hardware Configurator
   8          //
   9          // This file is only generated if it does not exist. Modifications in this file
  10          // will persist even if Configurator generates code. To refresh this file,
  11          // you must first delete it and then regenerate code.
  12          //
  13          // MODS ASP 2019-04-04
  14          //=============================================================================
  15          //-----------------------------------------------------------------------------
  16          // Includes
  17          //-----------------------------------------------------------------------------
  18          #include <si_toolchain.h>
  19          #include <endian.h>
  20          #include <stdlib.h>
  21          #include <string.h>
  22          #include <efm8_usb.h>
  23          #include "descriptors.h"
  24          #include <usb_audio.h>
  25          #include <usb_midi.h>
  26          
  27          #ifdef __cplusplus
              extern "C" {
              #endif
  30          
  31          /*
  32           * This is the Device Descriptor.
  33           */
  34          SI_SEGMENT_VARIABLE(deviceDesc[],
  36                          const USB_DeviceDescriptor_TypeDef,
  36                          SI_SEG_CODE) =
  37          {
  38                  USB_DEVICE_DESCSIZE,            // bLength
  39                  USB_DEVICE_DESCRIPTOR,                  // bDescriptorType
  40                  htole16(0x0200),                                // bcdUSB
  41                  0,                                                              // bDeviceClass
  42                  0,                                                              // bDeviceSubClass
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       04/24/2019 21:28:08 PAGE 2   

  43                  0,                                                              // bDeviceProtocol
  44                  64,                                                             // bMaxPacketSize
  45                  USB_VENDOR_ID,                                  // idVendor
  46                  USB_PRODUCT_ID,                                 // idProduct
  47                  htole16(0x0100),                                // bcdDevice
  48                  1,                                                              // iManufacturer
  49                  2,                                                              // iProduct
  50                  3,                                                              // iSerialNumber
  51                  1,                                                              // bNumConfigurations
  52          };
  53          
  54          // It would be nice if Keil C51 was C99 compliant!
  55          SI_SEGMENT_VARIABLE(configDesc[],
  57                          const USB_ConfigDesc_t,
  57                          SI_SEG_CODE) =
  58          {
  59                          // .Config_Header = {
  60                                          USB_CONFIG_DESCSIZE,            // bLength
  61                                          USB_CONFIG_DESCRIPTOR,          // bDescriptorType
  62                                          htole16(0x0085),                        // wTotalLength, 133 bytes
  63                                          2,                                                      // bNumInterfaces
  64                                          1,                                                      // bConfigurationValue
  65                                          4,                                                      // iConfiguration
  66                                          CONFIG_DESC_BM_RESERVED_D7, // bmAttributes
  67                                          CONFIG_DESC_MAXPOWER_mA(100), // bMaxPower
  68          
  69                          // .AC_Standard_IF_Desc = {
  70                                          USB_INTERFACE_DESCSIZE,         // bLength
  71                                          USB_INTERFACE_DESCRIPTOR,       // bDescriptorType
  72                                          0,                                                      // bInterfaceNumber, should make this a #define
  73                                          0,                                                      // bAlternateSetting
  74                                          0,                                                      // bNumEndpoints, this interface uses the control endpoint
  75                                          USB_CLASS_AUDIO,                        // bInterfaceClass
  76                                          USB_AUDIO_AUDIOCONTROL,         // bInterfaceSubClass
  77                                          0,                                                      // bInterfaceProtocol
  78                                          5,                                                      // iInterface
  79          
  80                          // .AC_CS_IF_Desc = {
  81                                          sizeof(USB_MIDI_CS_AC_IF_Descriptor_t), // bLength
  82                                          USB_CS_INTERFACE_DESCRIPTOR,    // bDescriptorType
  83                                          MIDI_CS_IF_HEADER,                              // bDescriptorSubtype
  84                                          htole16(0x0100),                                // bcdADC
  85                                          htole16(0x0009),                                // wTotalLength
  86                                          1,                                                              // bInCollection
  87                                          1,                                                              // baInterfaceNr
  88          
  89          //              .MS_Standard_IF_Desc = {
  90                                          USB_INTERFACE_DESCSIZE,         // bLength
  91                                          USB_INTERFACE_DESCRIPTOR,       // bDescriptorType
  92                                          1,                                                      // bInterfaceNumber, should make this a #define
  93                                          0,                                                      // bAlternateSetting
  94                                          2,                                                      // bNumEndpoints
  95                                          USB_CLASS_AUDIO,                        // bInterfaceClass
  96                                          USB_AUDIO_MIDISTREAMING,        // bInterfaceSubClass
  97                                          0,                                                      // bInterfaceProtocol
  98                                          6,                                                      // iInterface
  99          
 100                          // .MS_CS_IF_Desc = {
 101                                          sizeof(USB_MIDI_CS_MS_IF_Descriptor_t), // bLength
 102                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 103                                          MIDI_CS_IF_HEADER,                                              // bDescriptorSubtype
 104                                          htole16(0x0100),                                                // BcdADC
 105                                          htole16(0x0061),                                                // wTotalLength
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       04/24/2019 21:28:08 PAGE 3   

 106          
 107                          // .Jack_1 = {
 108                                          sizeof(USB_MIDI_In_Jack_Descriptor_t),  // bLength
 109                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 110                                          MIDI_CS_IF_IN_JACK,                                             // bDescriptorSubtype
 111                                          MIDI_JACKTYPE_Embedded,                                 // bJackType
 112                                          JACK1_EMBIN,                                                    // bJackID constant identifying this Jack within the function
 113                                          0,                                                                              // iJack index of a string descriptor describing this jack
 114          
 115                          // .Jack_2 = {
 116                                          USB_MIDI_OUT_JACK_DESCRIPTOR_SIZE(1),   // bLength
 117                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 118                                          MIDI_CS_IF_OUT_JACK,                                    // bDescriptorSubtype
 119                                          MIDI_JACKTYPE_External,                                 // bJackType
 120                                          JACK2_EXTOUT,                                                   // bJackID
 121                                          1,                                                                              // bNrInputPins
 122                                          JACK1_EMBIN,                                                    // baSourceID
 123                                          1,                                                                              // baSourcePin
 124                                          0,                                                                              // iJack
 125          
 126                          // .Jack_3 = {
 127                                          sizeof(USB_MIDI_In_Jack_Descriptor_t),  // bLength
 128                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 129                                          MIDI_CS_IF_IN_JACK,                                             // bDescriptorSubtype
 130                                          MIDI_JACKTYPE_External,                                 // bJackType
 131                                          JACK3_EXTIN,                                                    // bJackID constant identifying this Jack within the function
 132                                          0,                                                                              // iJack, index of a string descriptor describing this jack
 133          
 134                                  // .Jack_4 = {
 135                                          USB_MIDI_OUT_JACK_DESCRIPTOR_SIZE(1),   // bLength
 136                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 137                                          MIDI_CS_IF_OUT_JACK,                                    // bDescriptorSubtype
 138                                          MIDI_JACKTYPE_Embedded,                                 // bJackType
 139                                          JACK4_EMBOUT,                                                   // bJackID
 140                                          1,                                                                              // bNrInputPins
 141                                          JACK3_EXTIN,                                                    // baSourceID
 142                                          1,                                                                      // baSourcePin
 143                                          0,                                                                              // iJack
 144          
 145                                  // .Jack_5 = {
 146                                          sizeof(USB_MIDI_In_Jack_Descriptor_t),  // bLength
 147                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 148                                          MIDI_CS_IF_IN_JACK,                                             // bDescriptorSubtype
 149                                          MIDI_JACKTYPE_Embedded,                                 // bJackType
 150                                          JACK5_EMBIN,                                                    // bJackID constant identifying this Jack within the function
 151                                          0,                                                                              // iJack
 152          
 153                          // .Jack_6 = {
 154                                          USB_MIDI_OUT_JACK_DESCRIPTOR_SIZE(1),   // bLength
 155                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 156                                          MIDI_CS_IF_OUT_JACK,                                    // bDescriptorSubtype
 157                                          MIDI_JACKTYPE_External,                                 // bJackType
 158                                          JACK6_EXTOUT,                                                   // bJackID
 159                                          1,                                                                              // bNrInputPins
 160                                          JACK5_EMBIN,                                                    // baSourceID
 161                                          1,                                                                      // baSourcePin
 162                                          0,                                                                              // iJack
 163          
 164                          // .Jack_7 = {
 165                                          sizeof(USB_MIDI_In_Jack_Descriptor_t),  // bLength
 166                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 167                                          MIDI_CS_IF_IN_JACK,                                             // bDescriptorSubtype
 168                                          MIDI_JACKTYPE_External,                                 // bJackType
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       04/24/2019 21:28:08 PAGE 4   

 169                                          JACK7_EXTIN,                                                    // bJackID constant identifying this Jack within the function
 170                                          0,                                                                              // iJack index of a string descriptor describing this jack
 171          
 172                          // .Jack_8 = {
 173                                          USB_MIDI_OUT_JACK_DESCRIPTOR_SIZE(1),   // bLength
 174                                          USB_CS_INTERFACE_DESCRIPTOR,                    // bDescriptorType
 175                                          MIDI_CS_IF_OUT_JACK,                                    // bDescriptorSubtype
 176                                          MIDI_JACKTYPE_Embedded,                                 // bJackType
 177                                          JACK8_EMBOUT,                                                   // bJackID
 178                                          1,                                                                              // bNrInputPins
 179                                          JACK7_EXTIN,                                                    // baSourceID
 180                                          1,                                                                      // baSourcePin
 181                                          0,                                                                              // iJack
 182          
 183                          // .InEP1_Desc = {
 184                                          USB_ENDPOINT_DESCSIZE,                  // bLength
 185                                          USB_ENDPOINT_DESCRIPTOR,                // bDescriptorType
 186                                          0x81,                                                   // bEndpointAddress
 187                                          USB_EPTYPE_BULK,                                // bmAttributes
 188                                          htole16(0x0040),                                // wMaxPacketSize
 189                                          0,                                                              // bInterval
 190          
 191                          // .InEP1_CS_Desc = {
 192                                          USB_MIDI_CS_STREAMING_BULK_ENDPOINT_SIZE(2),    // bLength
 193                                          USB_CS_ENDPOINT_DESCRIPTOR,                     // bDescriptorType
 194                                          USB_MIDI_CS_EP_MS_GENERAL,                      // bDescriptorSubtype
 195                                          2,                                                                      // bNumEmbMIDIJack
 196                                          JACK4_EMBOUT, JACK8_EMBOUT,             // baAssocJackID
 197          
 198                          // .OutEP1_Desc = {
 199                                          USB_ENDPOINT_DESCSIZE,          // bLength
 200                                          USB_ENDPOINT_DESCRIPTOR,        // bDescriptorType
 201                                          0x01,                                           // bEndpointAddress
 202                                          USB_EPTYPE_BULK,                        // bmAttributes
 203                                          htole16(0x0040),                        // wMaxPacketSize
 204                                          0,                                                      // bInterval
 205          
 206                          // .OutEP1_CS_Desc = {
 207                                          USB_MIDI_CS_STREAMING_BULK_ENDPOINT_SIZE(2),    // bLength
 208                                          USB_CS_ENDPOINT_DESCRIPTOR,                                     // bDescriptorType
 209                                          USB_MIDI_CS_EP_MS_GENERAL,                                              // bDescriptorSubtype
 210                                          2,                                                                                              // bNumEmbMIDIJack
 211                                          JACK1_EMBIN, JACK5_EMBIN                                                // baAssocJackID
 212          
 213          };
 214          
 215          #define LANG_STRING   htole16( SLAB_USB_LANGUAGE )
 216          #define MFR_STRING                                'A','S','P',' ','D','i','g','i','t','a','l','\0'
 217          #define MFR_SIZE                                  12
 218          #define PROD_STRING                               'U','S','B',' ','M','I','D','I','\0'
 219          #define PROD_SIZE                                 9
 220          #define SER_STRING                                '0','1','2','3','4','5','6','7','8','9','A','B','C','D',
             -'E','F','\0'
 221          #define SER_SIZE                                  17
 222          #define CFG_STRING                                'C','o','n','f','i','g',' ','#','1','\0'
 223          #define CFG_SIZE                                  10
 224          #define INT0_STRING                               'A','u','d','i','o',' ','C','o','n','t','r','o','l','\0'
 225          #define INT0_SIZE                                 14
 226          #define INT1_STRING                               'M','I','D','I',' ','S','t','r','e','a','m','i','n','g',
             -'\0'
 227          #define INT1_SIZE                                 15
 228          
 229          LANGID_STATIC_CONST_STRING_DESC( langDesc[], LANG_STRING );
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       04/24/2019 21:28:08 PAGE 5   

 230          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( mfrDesc[], MFR_STRING, MFR_SIZE);
 231          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( prodDesc[], PROD_STRING, PROD_SIZE);
 232          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( serDesc[], SER_STRING, SER_SIZE);
 233          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( cfgDesc[], CFG_STRING, CFG_SIZE);
 234          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( int0Desc[], INT0_STRING, INT0_SIZE);
 235          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( int1Desc[], INT1_STRING, INT1_SIZE);
 236          
 237          //-----------------------------------------------------------------------------
 238          SI_SEGMENT_VARIABLE_SEGMENT_POINTER(myUsbStringTable_USEnglish[]
 241                          , static const USB_StringDescriptor_TypeDef,
 241                          SI_SEG_GENERIC,
 241                          const SI_SEG_CODE) =
 242          {
 243                  (SI_VARIABLE_SEGMENT_POINTER(, uint8_t, SI_SEG_CODE))langDesc,
 244                  mfrDesc,
 245                  prodDesc,
 246                  serDesc,
 247                  cfgDesc,
 248                  int0Desc,
 249                  int1Desc,
 250          
 251          };
 252          
 253          //-----------------------------------------------------------------------------
 254          SI_SEGMENT_VARIABLE(initstruct,
 256                          const USBD_Init_TypeDef,
 256                          SI_SEG_CODE) =
 257          {
 258                  (SI_VARIABLE_SEGMENT_POINTER(, USB_DeviceDescriptor_TypeDef, SI_SEG_GENERIC))deviceDesc, // deviceDescrip
             -tor
 259                  (SI_VARIABLE_SEGMENT_POINTER(, USB_ConfigurationDescriptor_TypeDef, SI_SEG_GENERIC))configDesc,// configD
             -escriptor
 260                  (SI_VARIABLE_SEGMENT_POINTER(, USB_StringTable_TypeDef, SI_SEG_GENERIC))myUsbStringTable_USEnglish,// str
             -ingDescriptors
 261                  sizeof(myUsbStringTable_USEnglish) / sizeof(myUsbStringTable_USEnglish[0])// numberOfStrings
 262          };
 263          
 264          #ifdef __cplusplus
              }
              #endif
 267          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =    277    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
